import{r as w,u as D,j as e,H as E,L as V}from"./app-Du9B3KTm.js";import{A as _}from"./AdminLayout-5mfhzfgN.js";import{A as S}from"./arrow-left-Co3KTzBw.js";import{P as C}from"./plus-0D_GpifE.js";import{X as k}from"./x-Bk_wRq8F.js";import{S as L}from"./save-BYqw4iqa.js";import"./FlashMessages-DHeiGbjk.js";import"./calendar-CrgQYxQp.js";import"./users-Cxve5Pw6.js";import"./users-round-BfESvuuc.js";import"./scroll-text-DCgjP3nb.js";import"./shield-DQcSmPeq.js";import"./gavel-Dc-Q2yLr.js";import"./chevron-right-BGe6hEc6.js";import"./user-BrRe-fRW.js";const P=["Presidente","Vice-Presidente","Relator","Membro"];function I({committee:o,members:c,legislatures:x,councilors:p}){const l=!!o,[t,d]=w.useState(c.map(s=>({councilor_id:String(s.councilor_id),role:s.role,councilor_name:s.councilor_name}))),{data:n,setData:a,post:f,processing:N}=D({name:(o==null?void 0:o.name)||"",slug:(o==null?void 0:o.slug)||"",description:(o==null?void 0:o.description)||"",type:(o==null?void 0:o.type)||"permanente",legislature_id:(o==null?void 0:o.legislature_id)||"",is_active:(o==null?void 0:o.is_active)??!0,members_json:JSON.stringify(c.map(s=>({councilor_id:s.councilor_id,role:s.role})))});function g(s){return s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function v(){const s=[...t,{councilor_id:"",role:"Membro",councilor_name:""}];d(s),a("members_json",JSON.stringify(s.filter(i=>i.councilor_id)))}function j(s){const i=t.filter((r,m)=>m!==s);d(i),a("members_json",JSON.stringify(i.filter(r=>r.councilor_id)))}function b(s,i,r){var h;const m=[...t];m[s]={...m[s],[i]:r},i==="councilor_id"&&(m[s].councilor_name=((h=p.find(u=>String(u.id)===r))==null?void 0:h.name)||""),d(m),a("members_json",JSON.stringify(m.filter(u=>u.councilor_id)))}function y(s){s.preventDefault(),l?f(`/painel/comissoes/${o.id}?_method=PUT`,{forceFormData:!0}):f("/painel/comissoes",{forceFormData:!0})}return e.jsxDEV(_,{title:l?"Editar Comissão":"Nova Comissão",children:[e.jsxDEV(E,{title:`${l?"Editar":"Nova"} Comissão - Painel`},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:68,columnNumber:7},this),e.jsxDEV(V,{href:"/painel/comissoes",className:"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700 mb-4",children:[e.jsxDEV(S,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:71,columnNumber:9},this)," Voltar"]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:70,columnNumber:7},this),e.jsxDEV("form",{onSubmit:y,className:"max-w-2xl space-y-6",children:[e.jsxDEV("div",{className:"bg-white rounded-xl border border-gray-100 p-6 space-y-4",children:[e.jsxDEV("h2",{className:"font-semibold text-gray-800 mb-2",children:"Dados da Comissão"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:76,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nome *"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:79,columnNumber:15},this),e.jsxDEV("input",{type:"text",value:n.name,onChange:s=>{a("name",s.target.value),l||a("slug",g(s.target.value))},required:!0,className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-navy/20 focus:border-navy outline-none"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:80,columnNumber:15},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tipo"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:86,columnNumber:15},this),e.jsxDEV("select",{value:n.type,onChange:s=>a("type",s.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-navy/20 focus:border-navy outline-none",children:[e.jsxDEV("option",{value:"permanente",children:"Permanente"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:89,columnNumber:17},this),e.jsxDEV("option",{value:"temporaria",children:"Temporária"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:90,columnNumber:17},this),e.jsxDEV("option",{value:"especial",children:"Especial"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:91,columnNumber:17},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:87,columnNumber:15},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:85,columnNumber:13},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:77,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Legislatura"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:96,columnNumber:13},this),e.jsxDEV("select",{value:n.legislature_id,onChange:s=>a("legislature_id",s.target.value),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-navy/20 focus:border-navy outline-none",children:[e.jsxDEV("option",{value:"",children:"Nenhuma"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:99,columnNumber:15},this),x.map(s=>e.jsxDEV("option",{value:s.id,children:[s.name," (",s.number,"ª)"]},s.id,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:101,columnNumber:17},this))]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:97,columnNumber:13},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:95,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Descrição"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:106,columnNumber:13},this),e.jsxDEV("textarea",{value:n.description,onChange:s=>a("description",s.target.value),rows:3,className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-navy/20 focus:border-navy outline-none"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:107,columnNumber:13},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:105,columnNumber:11},this),e.jsxDEV("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsxDEV("input",{type:"checkbox",checked:n.is_active,onChange:s=>a("is_active",s.target.checked),className:"rounded border-gray-300 text-navy focus:ring-navy"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:111,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm text-gray-600",children:"Ativa"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:113,columnNumber:13},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:110,columnNumber:11},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV("div",{className:"bg-white rounded-xl border border-gray-100 p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h2",{className:"font-semibold text-gray-800",children:"Membros"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:120,columnNumber:13},this),e.jsxDEV("button",{type:"button",onClick:v,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-navy border border-navy/20 rounded-lg hover:bg-navy/5 transition-colors",children:[e.jsxDEV(C,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:123,columnNumber:15},this)," Adicionar"]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:121,columnNumber:13},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:119,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[t.map((s,i)=>e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("select",{value:s.councilor_id,onChange:r=>b(i,"councilor_id",r.target.value),className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-navy/20 focus:border-navy outline-none",children:[e.jsxDEV("option",{value:"",children:"Selecionar vereador..."},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:131,columnNumber:19},this),p.map(r=>e.jsxDEV("option",{value:r.id,children:[r.name," (",r.party||"S/P",")"]},r.id,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:133,columnNumber:21},this))]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:129,columnNumber:17},this),e.jsxDEV("select",{value:s.role,onChange:r=>b(i,"role",r.target.value),className:"w-40 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-navy/20 focus:border-navy outline-none",children:P.map(r=>e.jsxDEV("option",{value:r,children:r},r,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:138,columnNumber:43},this))},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:136,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>j(i),className:"p-1.5 text-gray-400 hover:text-red-500",children:e.jsxDEV(k,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:141,columnNumber:19},this)},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:140,columnNumber:17},this)]},i,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:128,columnNumber:15},this)),t.length===0&&e.jsxDEV("p",{className:"text-sm text-gray-400 py-2",children:"Nenhum membro adicionado."},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:146,columnNumber:15},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:126,columnNumber:11},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:118,columnNumber:9},this),e.jsxDEV("button",{type:"submit",disabled:N,className:"flex items-center gap-2 px-6 py-2.5 bg-navy text-white rounded-xl hover:bg-navy-dark transition-colors text-sm font-medium disabled:opacity-50",children:[e.jsxDEV(L,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:153,columnNumber:11},this),N?"Salvando...":"Salvar"]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:151,columnNumber:9},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:74,columnNumber:7},this)]},void 0,!0,{fileName:"/home/claude/wordpress-to-nodejs/inertia/pages/admin/committees/form.tsx",lineNumber:67,columnNumber:5},this)}export{I as default};
